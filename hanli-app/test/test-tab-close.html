<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tab关闭按钮测试</title>
    <link rel="stylesheet" href="../renderer/styles.css">
    <link rel="stylesheet" href="../renderer/theme/light/colors.css">
    <link rel="stylesheet" href="../renderer/icons-fixed.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--color-background);
            color: var(--color-foreground);
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            background-color: var(--color-card-background);
            border-radius: 12px;
            border: 1px solid var(--color-border);
        }
        
        .test-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--color-text-primary);
        }
        
        .tab-demo {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .debug-info {
            background-color: var(--color-input-background);
            padding: 12px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: var(--color-text-secondary);
            margin-top: 10px;
        }
        
        /* 强制显示关闭按钮用于调试 */
        .tab-close-debug {
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 1 !important;
            background-color: red;
            color: white;
            width: 24px;
            height: 24px;
            display: flex !important;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Tab关闭按钮调试</h1>
        
        <div class="test-section">
            <div class="test-title">正常Tab（应该悬浮时显示关闭按钮）</div>
            <div class="tab-demo">
                <div class="tab" id="tab1">
                    <div class="tab-icon">
                        <i class="ph ph-house"></i>
                    </div>
                    <div class="tab-text">首页</div>
                    <div class="tab-close">
                        <i class="ph ph-x"></i>
                    </div>
                </div>
            </div>
            <div class="debug-info">
                <strong>调试信息：</strong><br>
                <span id="debug-info">等待悬浮...</span>
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">强制显示关闭按钮（用于调试）</div>
            <div class="tab-demo">
                <div class="tab" id="tab2">
                    <div class="tab-icon">
                        <i class="ph ph-package"></i>
                    </div>
                    <div class="tab-text">产品库</div>
                    <div class="tab-close tab-close-debug">
                        <i class="ph ph-x"></i>
                    </div>
                </div>
            </div>
            <div class="debug-info">
                这个Tab的关闭按钮被强制显示（红色圆圈），用于验证位置是否正确
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">激活状态Tab</div>
            <div class="tab-demo">
                <div class="tab active" id="tab3">
                    <div class="tab-icon">
                        <i class="ph ph-gear"></i>
                    </div>
                    <div class="tab-text">设置</div>
                    <div class="tab-close">
                        <i class="ph ph-x"></i>
                    </div>
                </div>
            </div>
            <div class="debug-info">
                激活状态的Tab应该始终显示关闭按钮
            </div>
        </div>
    </div>
    
    <script>
        // 调试功能
        function updateDebugInfo() {
            const tab1 = document.getElementById('tab1');
            const computedStyle = getComputedStyle(tab1);
            const closeBtn = tab1.querySelector('.tab-close');
            const closeBtnStyle = getComputedStyle(closeBtn);
            
            const info = `
                Tab position: ${computedStyle.position}<br>
                Tab padding-left: ${computedStyle.paddingLeft}<br>
                Close button position: ${closeBtnStyle.position}<br>
                Close button left: ${closeBtnStyle.left}<br>
                Close button opacity: ${closeBtnStyle.opacity}<br>
                Close button display: ${closeBtnStyle.display}<br>
                Close button visibility: ${closeBtnStyle.visibility}
            `;
            
            document.getElementById('debug-info').innerHTML = info;
        }
        
        // 监听悬浮事件
        document.getElementById('tab1').addEventListener('mouseenter', () => {
            setTimeout(updateDebugInfo, 100);
        });
        
        document.getElementById('tab1').addEventListener('mouseleave', () => {
            setTimeout(updateDebugInfo, 100);
        });
        
        // 初始化
        updateDebugInfo();
        
        // 每2秒更新一次调试信息
        setInterval(updateDebugInfo, 2000);
    </script>
</body>
</html>
