<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试应用启动</title>
    <link rel="stylesheet" href="../renderer/styles.css">
    <link rel="stylesheet" href="../renderer/theme/light/colors.css" id="theme-colors">
    <link rel="stylesheet" href="../renderer/icons-fixed.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- 组件库 -->
    <script src="../renderer/components/Common/TopBar.js"></script>
    <script src="../renderer/components/Common/SideBar.js"></script>
    <script src="../renderer/components/Common/PageContainer.js"></script>
    <script src="../renderer/components/Detail/ProductCharts.js"></script>
    <script src="../renderer/components/Detail/AttachmentCard.js"></script>
    <script src="../renderer/pages/HomePage.js"></script>
    <script src="../renderer/components/Modal/SettingsModal.js"></script>
</head>
<body>
    <div id="home-page" class="home-page">
        <!-- 自定义窗口控制按钮 -->
        <div class="window-controls">
            <button class="window-control-btn close-btn" id="close-btn">
                <i class="ph ph-x"></i>
            </button>
            <button class="window-control-btn minimize-btn" id="minimize-btn">
                <i class="ph ph-minus"></i>
            </button>
            <button class="window-control-btn fullscreen-btn" id="fullscreen-btn">
                <i class="ph ph-arrows-out"></i>
            </button>
        </div>

        <!-- TopBar 区域将由 TopBar 组件动态生成 -->

        <!-- 主内容区域 -->
        <div class="main-layout">
            <!-- SideBar 和 PageContainer 将由组件动态生成 -->
        </div>
    </div>

    <script>
        // 简化的初始化逻辑
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('开始测试应用启动...');
            
            try {
                // 检查组件是否加载
                console.log('检查组件加载状态:');
                console.log('- TopBar:', typeof TopBar !== 'undefined');
                console.log('- SideBar:', typeof SideBar !== 'undefined');
                console.log('- PageContainer:', typeof PageContainer !== 'undefined');
                console.log('- HomePageComponent:', typeof HomePageComponent !== 'undefined');
                console.log('- homePageComponentInstance:', typeof homePageComponentInstance !== 'undefined');
                
                // 创建HomePage实例
                if (typeof HomePage !== 'undefined') {
                    console.log('创建HomePage实例...');
                    const homePageInstance = new HomePage();
                    console.log('HomePage实例创建成功');
                    
                    console.log('开始初始化HomePage...');
                    await homePageInstance.init();
                    console.log('HomePage初始化完成');
                } else {
                    console.error('HomePage类未定义');
                }
                
            } catch (error) {
                console.error('初始化过程中出现错误:', error);
                console.error('错误堆栈:', error.stack);
            }
        });
    </script>
</body>
</html>