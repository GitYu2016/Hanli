<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tab主题适配测试</title>
    <link rel="stylesheet" href="../renderer/styles.css">
    <link rel="stylesheet" href="../renderer/theme/light/colors.css" id="theme-colors">
    <link rel="stylesheet" href="../renderer/icons-fixed.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--color-background);
            color: var(--color-foreground);
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            background-color: var(--color-card-background);
            border-radius: 12px;
            border: 1px solid var(--color-border);
        }
        
        .test-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--color-text-primary);
        }
        
        .theme-controls {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .theme-btn {
            padding: 8px 16px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            background-color: var(--color-background);
            color: var(--color-text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .theme-btn:hover {
            background-color: var(--color-hover);
        }
        
        .theme-btn.active {
            background-color: var(--color-active);
        }
        
        .tab-demo {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .color-info {
            background-color: var(--color-input-background);
            padding: 12px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: var(--color-text-secondary);
        }
        
        .color-info strong {
            color: var(--color-text-primary);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Tab主题适配测试</h1>
        
        <div class="test-section">
            <div class="test-title">主题切换控制</div>
            <div class="theme-controls">
                <button class="theme-btn active" data-theme="light">浅色主题</button>
                <button class="theme-btn" data-theme="dark">深色主题</button>
                <button class="theme-btn" data-theme="auto">跟随系统</button>
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">Tab样式测试</div>
            <div class="tab-demo">
                <div class="tab">
                    <div class="tab-icon">
                        <i class="ph ph-house"></i>
                    </div>
                    <div class="tab-text">首页</div>
                    <div class="tab-close">
                        <i class="ph ph-x"></i>
                    </div>
                </div>
                
                <div class="tab active">
                    <div class="tab-icon">
                        <i class="ph ph-house"></i>
                    </div>
                    <div class="tab-text">首页</div>
                    <div class="tab-close">
                        <i class="ph ph-x"></i>
                    </div>
                </div>
                
                <div class="tab">
                    <div class="tab-icon">
                        <i class="ph ph-package"></i>
                    </div>
                    <div class="tab-text">产品库</div>
                    <div class="tab-close">
                        <i class="ph ph-x"></i>
                    </div>
                </div>
                
                <div class="tab">
                    <div class="tab-icon">
                        <i class="ph ph-gear"></i>
                    </div>
                    <div class="tab-text">设置</div>
                    <div class="tab-close">
                        <i class="ph ph-x"></i>
                    </div>
                </div>
                
                <div class="tab">
                    <div class="tab-icon">
                        <i class="ph ph-image"></i>
                    </div>
                    <div class="tab-text">很长的Tab标题测试</div>
                    <div class="tab-close">
                        <i class="ph ph-x"></i>
                    </div>
                </div>
            </div>
            
            <div class="color-info">
                <strong>当前主题颜色值：</strong><br>
                <span id="color-info">加载中...</span>
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">测试说明</div>
            <ul style="color: var(--color-text-secondary); line-height: 1.6;">
                <li><strong>宽度自适应</strong>：Tab宽度根据内容自动调整，无最小宽度限制</li>
                <li><strong>默认状态</strong>：显示左侧图标，关闭按钮透明度为0</li>
                <li><strong>悬停状态</strong>：图标透明度为0，关闭按钮透明度为100%</li>
                <li><strong>激活状态</strong>：图标透明度为0，关闭按钮透明度为100%</li>
                <li><strong>位置重叠</strong>：关闭按钮绝对定位在图标位置，通过透明度切换</li>
                <li><strong>平滑过渡</strong>：透明度变化有0.2s的过渡动画</li>
                <li><strong>背景色适配</strong>：默认使用 --color-hover，激活使用 --color-active</li>
                <li><strong>浅色主题</strong>：hover: rgba(0,0,0,0.05), active: rgba(0,0,0,0.1)</li>
                <li><strong>深色主题</strong>：hover: rgba(255,255,255,0.05), active: rgba(255,255,255,0.1)</li>
                <li><strong>文本颜色</strong>：默认使用 --color-text-secondary，激活时使用 --color-text-primary</li>
            </ul>
        </div>
    </div>
    
    <script>
        // 主题切换功能
        function switchTheme(theme) {
            const themeColors = document.getElementById('theme-colors');
            const buttons = document.querySelectorAll('.theme-btn');
            
            // 更新按钮状态
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // 切换主题
            if (theme === 'dark') {
                themeColors.href = '../renderer/theme/dark/colors.css';
                document.body.className = 'theme-dark';
            } else if (theme === 'light') {
                themeColors.href = '../renderer/theme/light/colors.css';
                document.body.className = 'theme-light';
            } else {
                themeColors.href = '../renderer/theme/light/colors.css';
                document.body.className = 'theme-auto';
            }
            
            // 更新颜色信息
            updateColorInfo();
        }
        
        function updateColorInfo() {
            const computedStyle = getComputedStyle(document.documentElement);
            const hoverColor = computedStyle.getPropertyValue('--color-hover').trim();
            const activeColor = computedStyle.getPropertyValue('--color-active').trim();
            const textPrimary = computedStyle.getPropertyValue('--color-text-primary').trim();
            const textSecondary = computedStyle.getPropertyValue('--color-text-secondary').trim();
            
            document.getElementById('color-info').innerHTML = `
                --color-hover: ${hoverColor}<br>
                --color-active: ${activeColor}<br>
                --color-text-primary: ${textPrimary}<br>
                --color-text-secondary: ${textSecondary}
            `;
        }
        
        // 绑定事件
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.addEventListener('click', () => switchTheme(btn.dataset.theme));
        });
        
        // 初始化
        updateColorInfo();
        
        // 模拟tab点击
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
            });
        });
    </script>
</body>
</html>
