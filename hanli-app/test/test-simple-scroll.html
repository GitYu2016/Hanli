<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简单滚动测试</title>
    <link rel="stylesheet" href="../renderer/styles.css">
    <link rel="stylesheet" href="../renderer/icons-fixed.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }
        
        .debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 9999;
        }
        
        .test-button {
            position: fixed;
            top: 60px;
            right: 10px;
            background: #007acc;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <!-- 调试信息 -->
    <div class="debug-info" id="debug-info">
        调试信息加载中...
    </div>
    
    <!-- 测试按钮 -->
    <button class="test-button" onclick="addMoreRows()">添加更多行</button>
    
    <!-- 模拟完整的应用布局 -->
    <div class="home-page">
        <!-- 顶部栏 -->
        <div class="top-bar">
            <div class="top-bar-left">
                <div class="logo">Hanli</div>
            </div>
            <div class="top-bar-center">
                <div class="top-bar-tabs">
                    <div class="tab active">
                        <div class="tab-icon">
                            <i class="ph ph-house"></i>
                        </div>
                        <div class="tab-text">产品库</div>
                    </div>
                </div>
            </div>
            <div class="top-bar-right">
                <div class="settings-icon">
                    <i class="ph ph-sliders"></i>
                </div>
            </div>
        </div>
        
        <!-- 主布局 -->
        <div class="main-layout">
            <!-- 侧边栏 -->
            <div class="sidebar">
                <div class="sidebar-content">
                    <div class="sidebar-item active">
                        <div class="sidebar-item-content">
                            <div class="sidebar-item-icon">
                                <i class="ph ph-package"></i>
                            </div>
                            <div class="sidebar-item-text">产品库</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 页面容器 -->
            <div class="page-container">
                <!-- 产品库页面 -->
                <div class="product-library-page">
                    <div class="page-header">
                        <h1 class="page-title">产品库测试</h1>
                        <div class="page-actions">
                            <span>共 <span id="product-count">10</span> 个产品</span>
                        </div>
                    </div>
                    
                    <div class="product-table-container">
                        <table class="product-table">
                            <thead>
                                <tr>
                                    <th class="sortable">产品标题</th>
                                    <th class="sortable">昨日销量</th>
                                    <th class="sortable">价格增长</th>
                                    <th class="sortable">采集日期</th>
                                </tr>
                            </thead>
                            <tbody id="product-table-body">
                                <!-- 产品行将在这里生成 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let productCount = 10;
        
        function generateProductRow(index) {
            const products = [
                'Boundless Voyage纯钛户外锅铲',
                '便携式野营炒菜铲子',
                '轻量级饭勺套装',
                '户外烹饪工具包',
                '钛合金餐具组合',
                '野营必备厨具',
                '户外便携锅具',
                '野餐烹饪工具',
                '露营餐具套装',
                '户外厨房用品',
                '便携式炊具',
                '野营炒锅套装',
                '户外烧烤工具',
                '野餐必备用品',
                '露营烹饪设备',
                '便携式炉具',
                '户外餐具组合',
                '野营厨房工具',
                '钛制烹饪用具',
                '户外野餐套装'
            ];
            
            const productName = products[index % products.length] || `测试产品 ${index + 1}`;
            const sales = Math.floor(Math.random() * 1000) + 50;
            const priceChange = (Math.random() > 0.5 ? '+' : '-') + (Math.random() * 10).toFixed(1) + '%';
            const date = `2025-01-${String(14 - (index % 14)).padStart(2, '0')}`;
            
            return `
                <tr class="product-row">
                    <td class="product-name clickable" data-goods-id="test${index}">
                        <div class="name-content">${productName}</div>
                    </td>
                    <td class="product-sales">${sales}</td>
                    <td class="product-price-growth ${priceChange.startsWith('+') ? 'positive' : 'negative'}">${priceChange}</td>
                    <td class="product-time">${date}</td>
                </tr>
            `;
        }
        
        function generateProductTable() {
            const tbody = document.getElementById('product-table-body');
            let html = '';
            
            for (let i = 0; i < productCount; i++) {
                html += generateProductRow(i);
            }
            
            tbody.innerHTML = html;
            document.getElementById('product-count').textContent = productCount;
        }
        
        function addMoreRows() {
            productCount += 10;
            generateProductTable();
            updateDebugInfo();
        }
        
        function updateDebugInfo() {
            const pageContainer = document.querySelector('.page-container');
            const libraryPage = document.querySelector('.product-library-page');
            const tableContainer = document.querySelector('.product-table-container');
            const table = document.querySelector('.product-table');
            
            const info = `
                页面容器高度: ${pageContainer.clientHeight}px<br>
                库页面高度: ${libraryPage.clientHeight}px<br>
                表格容器高度: ${tableContainer.clientHeight}px<br>
                表格高度: ${table.scrollHeight}px<br>
                表格容器滚动: ${tableContainer.scrollHeight > tableContainer.clientHeight ? '是' : '否'}<br>
                产品数量: ${productCount}
            `;
            
            document.getElementById('debug-info').innerHTML = info;
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', () => {
            generateProductTable();
            updateDebugInfo();
            
            // 定期更新调试信息
            setInterval(updateDebugInfo, 1000);
            
            // 添加滚动监听器
            const tableContainer = document.querySelector('.product-table-container');
            tableContainer.addEventListener('scroll', () => {
                console.log('表格容器滚动:', tableContainer.scrollTop);
            });
        });
    </script>
</body>
</html>
