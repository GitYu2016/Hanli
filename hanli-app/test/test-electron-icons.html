<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electron 图标测试</title>
    <!-- Phosphor Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/fill/style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .icon-test {
            display: inline-block;
            margin: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
            text-align: center;
            min-width: 100px;
        }
        .icon-test i {
            font-size: 24px;
            display: block;
            margin-bottom: 5px;
        }
        .icon-test span {
            font-size: 12px;
            color: #666;
        }
        .debug-info {
            background: #e9ecef;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Electron 环境图标测试</h1>
    
    <div class="test-section">
        <h2>基础图标测试</h2>
        <div class="icon-test">
            <i class="ph ph-house"></i>
            <span>ph-house</span>
        </div>
        <div class="icon-test">
            <i class="ph ph-package"></i>
            <span>ph-package</span>
        </div>
        <div class="icon-test">
            <i class="ph ph-gear"></i>
            <span>ph-gear</span>
        </div>
        <div class="icon-test">
            <i class="ph ph-magnifying-glass"></i>
            <span>ph-magnifying-glass</span>
        </div>
        <div class="icon-test">
            <i class="ph ph-download"></i>
            <span>ph-download</span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>填充样式测试</h2>
        <div class="icon-test">
            <i class="ph-fill ph-house"></i>
            <span>ph-fill ph-house</span>
        </div>
        <div class="icon-test">
            <i class="ph-fill ph-package"></i>
            <span>ph-fill ph-package</span>
        </div>
        <div class="icon-test">
            <i class="ph-fill ph-heart"></i>
            <span>ph-fill ph-heart</span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>调试信息</h2>
        <div class="debug-info" id="debug-info">
            正在检查环境...
        </div>
    </div>
    
    <script>
        // 检查环境信息
        function checkEnvironment() {
            const debugDiv = document.getElementById('debug-info');
            let info = [];
            
            // 检查是否在 Electron 环境中
            const isElectron = typeof window !== 'undefined' && window.process && window.process.type;
            info.push(`环境: ${isElectron ? 'Electron' : '浏览器'}`);
            
            // 检查 CDN 加载状态
            const regularLink = document.querySelector('link[href*="regular/style.css"]');
            const fillLink = document.querySelector('link[href*="fill/style.css"]');
            
            if (regularLink && fillLink) {
                info.push(`CDN 链接: 已加载`);
                info.push(`Regular: ${regularLink.href}`);
                info.push(`Fill: ${fillLink.href}`);
            } else {
                info.push(`CDN 链接: 加载失败`);
            }
            
            // 检查字体是否加载
            setTimeout(() => {
                const testElement = document.querySelector('.ph-house');
                if (testElement) {
                    const computedStyle = window.getComputedStyle(testElement);
                    const fontFamily = computedStyle.fontFamily;
                    const content = computedStyle.content;
                    
                    info.push(`字体族: ${fontFamily}`);
                    info.push(`Content: ${content}`);
                    
                    if (fontFamily.includes('Phosphor') || content !== 'none') {
                        info.push(`图标字体: 已加载`);
                    } else {
                        info.push(`图标字体: 未加载`);
                    }
                }
                
                // 检查网络状态
                if (navigator.onLine) {
                    info.push(`网络状态: 在线`);
                } else {
                    info.push(`网络状态: 离线`);
                }
                
                // 检查 CSP 策略
                const metaCSP = document.querySelector('meta[http-equiv="Content-Security-Policy"]');
                if (metaCSP) {
                    info.push(`CSP 策略: ${metaCSP.content}`);
                } else {
                    info.push(`CSP 策略: 未设置`);
                }
                
                debugDiv.innerHTML = info.join('<br>');
            }, 1000);
        }
        
        // 页面加载完成后检查
        window.addEventListener('load', checkEnvironment);
        
        // 监听字体加载事件
        document.fonts.ready.then(() => {
            console.log('字体加载完成');
            checkEnvironment();
        });
        
        // 监听网络状态变化
        window.addEventListener('online', () => {
            console.log('网络已连接');
            checkEnvironment();
        });
        
        window.addEventListener('offline', () => {
            console.log('网络已断开');
            checkEnvironment();
        });
    </script>
</body>
</html>
