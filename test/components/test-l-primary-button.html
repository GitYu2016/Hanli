<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MPrimaryButton 组件测试</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
        }

        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
        }

        .test-section h2 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }

        .test-section h3 {
            color: #555;
            margin-top: 20px;
        }

        .button-demo {
            margin: 10px;
            display: inline-block;
        }

        .theme-switcher {
            margin-bottom: 20px;
            padding: 15px;
            background: #fff;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .theme-switcher button {
            margin-right: 10px;
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #fff;
            cursor: pointer;
        }

        .theme-switcher button.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        .demo-row {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 15px 0;
            padding: 15px;
            background: #fff;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }

        .demo-label {
            min-width: 120px;
            font-weight: 500;
            color: #666;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 12px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 10px 0;
        }

        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
        }

        .status-info {
            background: #d1ecf1;
            color: #0c5460;
        }

        /* 主题样式 */
        .theme-dark {
            background: #1a1a1a;
            color: #fff;
        }

        .theme-dark .test-section {
            background: #2a2a2a;
            border-color: #444;
        }

        .theme-dark .test-section h2,
        .theme-dark .test-section h3 {
            color: #fff;
        }

        .theme-dark .theme-switcher {
            background: #2a2a2a;
        }

        .theme-dark .theme-switcher button {
            background: #2a2a2a;
            border-color: #444;
            color: #fff;
        }

        .theme-dark .theme-switcher button.active {
            background: #007bff;
            color: white;
        }

        .theme-dark .demo-row {
            background: #2a2a2a;
            border-color: #444;
        }

        .theme-dark .demo-label {
            color: #ccc;
        }

        .theme-dark .code-block {
            background: #1e1e1e;
            border-color: #444;
            color: #fff;
        }

        .theme-light {
            background: #f5f5f5;
            color: #333;
        }

        .theme-light .test-section {
            background: #fff;
            border-color: #ddd;
        }

        .theme-light .demo-row {
            background: #fff;
            border-color: #ddd;
        }
    </style>
</head>
<body class="theme-light">
    <div class="test-container">
        <h1>LPrimaryButton 组件测试</h1>
        
        <!-- 主题切换器 -->
        <div class="theme-switcher">
            <strong>主题切换：</strong>
            <button id="light-theme" class="active">浅色主题</button>
            <button id="dark-theme">深色主题</button>
        </div>

        <!-- 基础功能测试 -->
        <div class="test-section">
            <h2>基础功能测试</h2>
            
            <div class="demo-row">
                <div class="demo-label">基础按钮：</div>
                <div id="basic-button" class="button-demo"></div>
            </div>

            <div class="demo-row">
                <div class="demo-label">带图标按钮：</div>
                <div id="icon-button" class="button-demo"></div>
            </div>

            <div class="demo-row">
                <div class="demo-label">禁用状态：</div>
                <div id="disabled-button" class="button-demo"></div>
            </div>

            <div class="demo-row">
                <div class="demo-label">加载状态：</div>
                <div id="loading-button" class="button-demo"></div>
            </div>

            <div class="demo-row">
                <div class="demo-label">点击事件：</div>
                <div id="click-button" class="button-demo"></div>
                <div id="click-result" class="status-indicator status-info">等待点击</div>
            </div>
        </div>

        <!-- 主题适配测试 -->
        <div class="test-section">
            <h2>主题适配测试</h2>
            <p>切换主题查看按钮颜色变化：</p>
            <ul>
                <li><strong>深色主题</strong>：白色背景，黑色半透明文字</li>
                <li><strong>浅色主题</strong>：黑色背景，白色半透明文字</li>
            </ul>
            
            <div class="demo-row">
                <div class="demo-label">主题测试按钮：</div>
                <div id="theme-test-button" class="button-demo"></div>
            </div>
        </div>

        <!-- 按钮组测试 -->
        <div class="test-section">
            <h2>按钮组测试</h2>
            
            <div class="demo-row">
                <div class="demo-label">按钮组：</div>
                <div id="button-group" class="button-demo"></div>
            </div>
        </div>

        <!-- 动态更新测试 -->
        <div class="test-section">
            <h2>动态更新测试</h2>
            
            <div class="demo-row">
                <div class="demo-label">可更新按钮：</div>
                <div id="dynamic-button" class="button-demo"></div>
                <div>
                    <button onclick="updateButtonText()" style="margin-right: 10px;">更新文本</button>
                    <button onclick="toggleDisabled()" style="margin-right: 10px;">切换禁用</button>
                    <button onclick="toggleLoading()">切换加载</button>
                </div>
            </div>
        </div>

        <!-- 使用示例 -->
        <div class="test-section">
            <h2>使用示例</h2>
            
            <h3>基础用法</h3>
            <div class="code-block">
// 创建基础按钮
const button = lPrimaryButtonInstance.create({
    text: '点击我',
    onClick: () => console.log('按钮被点击了')
});
            </div>

            <h3>带图标按钮</h3>
            <div class="code-block">
// 创建带图标按钮
const iconButton = lPrimaryButtonInstance.create({
    text: '保存',
    icon: 'ph-floppy-disk',
    onClick: () => console.log('保存按钮被点击了')
});
            </div>

            <h3>按钮组</h3>
            <div class="code-block">
// 创建按钮组
const buttonGroup = lPrimaryButtonInstance.createGroup([
    { text: '取消', onClick: () => console.log('取消') },
    { text: '确定', onClick: () => console.log('确定') }
]);
            </div>
        </div>
    </div>

    <!-- 引入必要的依赖 -->
    <script src="../../../hanli-app/renderer/components/Common/StyleManager.js"></script>
    <script src="../../../hanli-app/renderer/components/Common/LPrimaryButton.js"></script>

    <script>
        // 等待组件加载完成
        document.addEventListener('DOMContentLoaded', function() {
            // 检查组件是否加载成功
            if (typeof window.lPrimaryButtonInstance === 'undefined') {
                console.error('LPrimaryButton 组件未加载成功');
                return;
            }

            // 创建测试按钮
            createTestButtons();
            
            // 绑定主题切换事件
            bindThemeEvents();
        });

        /**
         * 创建测试按钮
         */
        function createTestButtons() {
            // 基础按钮
            const basicButton = window.lPrimaryButtonInstance.create({
                text: '基础按钮',
                onClick: () => console.log('基础按钮被点击')
            });
            document.getElementById('basic-button').appendChild(basicButton);

            // 带图标按钮
            const iconButton = window.lPrimaryButtonInstance.create({
                text: '保存',
                icon: 'ph-floppy-disk',
                onClick: () => console.log('保存按钮被点击')
            });
            document.getElementById('icon-button').appendChild(iconButton);

            // 禁用按钮
            const disabledButton = window.lPrimaryButtonInstance.create({
                text: '禁用按钮',
                disabled: true,
                onClick: () => console.log('这个按钮不应该被点击')
            });
            document.getElementById('disabled-button').appendChild(disabledButton);

            // 加载按钮
            const loadingButton = window.lPrimaryButtonInstance.create({
                text: '加载中',
                loading: true,
                onClick: () => console.log('加载按钮被点击')
            });
            document.getElementById('loading-button').appendChild(loadingButton);

            // 点击事件测试按钮
            const clickButton = window.lPrimaryButtonInstance.create({
                text: '点击测试',
                onClick: () => {
                    const result = document.getElementById('click-result');
                    result.textContent = '按钮被点击了！';
                    result.className = 'status-indicator status-success';
                    setTimeout(() => {
                        result.textContent = '等待点击';
                        result.className = 'status-indicator status-info';
                    }, 2000);
                }
            });
            document.getElementById('click-button').appendChild(clickButton);

            // 主题测试按钮
            const themeTestButton = window.lPrimaryButtonInstance.create({
                text: '主题测试',
                onClick: () => console.log('主题测试按钮被点击')
            });
            document.getElementById('theme-test-button').appendChild(themeTestButton);

            // 按钮组
            const buttonGroup = window.lPrimaryButtonInstance.createGroup([
                { 
                    text: '取消', 
                    onClick: () => console.log('取消按钮被点击')
                },
                { 
                    text: '确定', 
                    onClick: () => console.log('确定按钮被点击')
                },
                { 
                    text: '保存', 
                    icon: 'ph-floppy-disk',
                    onClick: () => console.log('保存按钮被点击')
                }
            ]);
            document.getElementById('button-group').appendChild(buttonGroup);

            // 动态按钮
            window.dynamicButton = window.lPrimaryButtonInstance.create({
                text: '动态按钮',
                onClick: () => console.log('动态按钮被点击')
            });
            document.getElementById('dynamic-button').appendChild(window.dynamicButton);
        }

        /**
         * 绑定主题切换事件
         */
        function bindThemeEvents() {
            const lightThemeBtn = document.getElementById('light-theme');
            const darkThemeBtn = document.getElementById('dark-theme');
            const body = document.body;

            lightThemeBtn.addEventListener('click', () => {
                body.className = 'theme-light';
                lightThemeBtn.classList.add('active');
                darkThemeBtn.classList.remove('active');
            });

            darkThemeBtn.addEventListener('click', () => {
                body.className = 'theme-dark';
                darkThemeBtn.classList.add('active');
                lightThemeBtn.classList.remove('active');
            });
        }

        /**
         * 更新按钮文本
         */
        function updateButtonText() {
            if (window.dynamicButton) {
                const texts = ['动态按钮', '已更新', '再次更新', '文本变化', '动态按钮'];
                const currentText = window.dynamicButton.querySelector('.l-primary-btn-text').textContent;
                const currentIndex = texts.indexOf(currentText);
                const nextIndex = (currentIndex + 1) % texts.length;
                
                window.lPrimaryButtonInstance.update(window.dynamicButton, {
                    text: texts[nextIndex]
                });
            }
        }

        /**
         * 切换禁用状态
         */
        function toggleDisabled() {
            if (window.dynamicButton) {
                const isDisabled = window.dynamicButton.classList.contains('l-primary-btn-disabled');
                window.lPrimaryButtonInstance.update(window.dynamicButton, {
                    disabled: !isDisabled
                });
            }
        }

        /**
         * 切换加载状态
         */
        function toggleLoading() {
            if (window.dynamicButton) {
                const isLoading = window.dynamicButton.classList.contains('l-primary-btn-loading');
                window.lPrimaryButtonInstance.update(window.dynamicButton, {
                    loading: !isLoading
                });
            }
        }
    </script>
</body>
</html>
