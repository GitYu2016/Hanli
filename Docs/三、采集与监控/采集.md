# 采集功能说明

## 功能概述
采集功能用于从网页中提取商品信息，并生成标准化的数据文件。

## 主要功能

### 1. 生成JSON文件
- 采集完成后自动生成包含商品信息的JSON文件
- JSON文件包含完整的商品数据结构和字段信息
- 文件格式遵循项目统一的数据规范

### 2. 唤起App
- 采集完成后自动唤起hanli-app应用程序
- 通过系统通知或直接启动App的方式实现
- 确保数据能够及时传递到主应用程序

### 3. 文件存储管理·
- **存储位置**: hanli-app的data文件夹下
- **文件夹命名**: 以goodsId命名的独立文件夹
- **文件结构**:
  ```
  hanli-app/data/
  └── {goodsId}/
      ├── data.json          # 商品数据文件
      ├── image1.jpg         # 图片文件
      ├── image2.png
      ├── video1.mp4         # 视频文件
      ├── video2.mov
      └── ...
  ```

### 4. 媒体文件下载
- **图片下载**: 自动下载商品相关的所有图片到goodsId文件夹
- **视频下载**: 自动下载商品相关的所有视频到goodsId文件夹
- **文件命名**: 保持原始文件名或按序号命名
- **格式支持**: 支持常见图片格式(jpg, png, gif, webp)和视频格式(mp4, mov, avi)

## 技术实现
- 使用Chrome扩展的downloads API进行文件下载
- 通过消息传递机制与主App通信
- 采用异步处理确保下载过程的稳定性
- 实现下载进度监控和错误处理机制
